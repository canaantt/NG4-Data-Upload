<div class="permissions">
  <div class="row">
      <div class="col-12">
      <div class="col-12">
        <h5>User Permissions</h5>
      </div>
      <div *ngIf="role === 'admin'">
        <div *ngFor="let permission of permissions$ | async">
          <div class="row">
            <div class="col-4">
              <p *ngIf="project.Author === permission.User">Dataset Administrator</p>
            </div>
            <!-- <p><span *ngIf="project.Author === permission.User">Admin User</span></p> -->
            <div class="col-6">
              <p style="color:blue;">{{permission.User | userFullName | async }}</p>
            </div>
          </div>

          <div class="col-12">
            <div>Add New User</div>
          </div>

          <!-- <div><span *ngIf="project.Author === permission.User">Admin User</span></div> -->


          <h4 *ngIf="project.Author !== permission.User"><select [(ngModel)]="permission.Role" (change)="updatePermission(permission, $event.target.value)">
                
        <option *ngFor="let role of roles" [value]="role">{{role}}</option>
              </select></h4>


          <h5 *ngIf="project.Author !== permission.User" type="button" class="btn fa fa-minus" (click)="deletePermission(permission)"></h5>





          <form class='submitForm' [formGroup]="newPermissionForm">
          

              <input class="form-control" type="text" formControlName="Email" placeholder="Enter Collaborator's Institutional Email">
            <select formControlName="Role">
              <option *ngFor="let role of roles" [ngValue]="role">{{role}}</option></select>



              <p><button (click)="submitPermissions()" class="btn fa fa-plus detail-submission-btn"></button></p>

              <p><small [hidden]="newPermissionForm.controls.Email.valid" class="text-danger">Please Add Valid Email</small></p>
        
          </form>


          <small class="text-danger">{{emailError}}</small>
        </div>



        <div *ngIf="role !== 'admin'">
          <div class="form-group row" *ngFor="let permission of permissions$ | async">
            <p><span class="detail-users">{{permission.User | userFullName | async }}</span></p>
            <p><span>{{permission.Role}}</span></p>
          </div>
        </div>
      <br>
      <br>
      </div>
  
  </div>
</div>
</div>